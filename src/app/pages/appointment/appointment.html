<div class="appointment-container">
  <h2>ğŸ—“ï¸ Agendar una Cita</h2>

  <form (ngSubmit)="onSubmit()" #form="ngForm" class="appointment-form">

    <!-- ğŸ”¹ Seleccionar especialidad -->
    <label>ğŸ¥ Especialidad:</label>
    <select [(ngModel)]="selectedEspecialidadId" name="idEspecialidad" (change)="filtrarMedicos()" required>
      <option value="">-- Selecciona una especialidad --</option>
      <option *ngFor="let esp of especialidades" [value]="esp.idEspecialidad">
        {{ esp.nombreEspecialidad }}
      </option>
    </select>

    <!-- ğŸ”¹ Seleccionar mÃ©dico filtrado -->
    <label>ğŸ‘¨â€âš•ï¸ MÃ©dico:</label>
    <select [(ngModel)]="appointment.medico.idUsuario" name="idUsuarioMedico" required>
      <option value="">-- Selecciona un mÃ©dico --</option>
      <option *ngFor="let doctor of medicosFiltrados" [value]="doctor.idUsuario">
        {{ doctor.nombre }} {{ doctor.apellido }}
      </option>
    </select>

    <label>ğŸ“… Fecha:</label>
    <input type="date" [(ngModel)]="appointment.fechaCita" name="fechaCita" required />

    <label>ğŸ•’ Hora:</label>
    <input type="time" [(ngModel)]="appointment.horaCita" name="horaCita" required />

    <label>ğŸ¥ Tipo de Cita:</label>
    <select [(ngModel)]="appointment.tipoCita" name="tipoCita" required>
      <option value="">-- Selecciona tipo --</option>
      <option value="PRESENCIAL">Presencial</option>
      <option value="TELEMEDICINA">Telemedicina</option>
    </select>

    <label>ğŸ“ Motivo de la Consulta:</label>
    <textarea [(ngModel)]="appointment.motivoConsulta" name="motivoConsulta" rows="3"></textarea>

    <button type="submit" [disabled]="!form.valid">Agendar Cita</button>
  </form>

  <p *ngIf="mensaje" class="mensaje">{{ mensaje }}</p>
</div>
